<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:i18n="http://genshi.edgewall.org/i18n"
      xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="layout.html" />
  <head>
    <title>Available Reports</title>
  </head>
  <body>
    <div id="content" class="report">

      <h1>Available Reports</h1>

      <form id="prefs" method="get" action="">
        <div>
          <input id="trac-toggle-description" type="checkbox" />
          <label for="trac-toggle-description">Show Descriptions</label>
        </div>
      </form>

      <div id="description" />

      <div py:choose="" class="reports">
        <py:when test="reports">
          <h2>SQL reports and saved custom queries
            <span id="trac-sort-order" py:with="report_asc = asc if sort == 'report' else None;
                                                title_asc = asc if sort == 'title' else None">
              Sort by:
              <a href="${href.report(sort='report', asc='0' if report_asc else '1')}"
                 class="${('desc', 'asc')[report_asc] if report_asc is not None else None}">
                Identifier</a>
              <a href="${href.report(sort='title', asc='0' if title_asc else '1')}"
                 class="${('desc', 'asc')[title_asc] if title_asc is not None else None}">
                Title</a>
            </span>
          </h2>

          <div py:for="id, title, description, can_edit, can_delete in reports">
            <form py:if="can_delete" method="get" action="${href.report(id)}">
              <div class="inlinebuttons">
                <input type="hidden" name="action" value="delete" />
                <input type="submit" value="${captioned_button('–', _('Delete'))}"
                     title="Delete report" class="trac-delete" />
              </div>
            </form>
            <form py:if="can_edit" method="get" action="${href.report(id)}">
              <div class="inlinebuttons">
                <input type="hidden" name="action" value="edit" />
                <input type="submit" value="${captioned_button('✎', _('Edit'))}"
                     title="Edit report" />
              </div>
            </form>
            <h3><a title="View report" href="${href.report(id)}" py:choose="sort">
              <py:when test="'title'">$title <em>{$id}</em></py:when>
              <py:otherwise><em>{$id}</em> $title</py:otherwise>
              </a></h3>
            <span class="foldable" />
            <div py:if="description" class="description" xml:space="preserve">
              ${wiki_to_html(context, description)}
            </div>
          </div>
        </py:when>
        <p py:otherwise="">No users available.</p>
      </div>
    </div>
  </body>
</html>
